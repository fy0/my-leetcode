/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     struct ListNode *next;
 * };
 */
struct ListNode* addTwoNumbers(struct ListNode* l1, struct ListNode* l2) {
    // Input: (2 -> 4 -> 3) + (5 -> 6 -> 4)
    // Output: 7 -> 0 -> 8
    // 465 + 342 = 807
    
    //[4,5,2,2,9,3,8,9,2]
    //[0,7,6,1,6,5,0,6,7]
    // 298392254 + 760561670 = 1058953924
    
    // 这个方案不行，测试用例的位数过长爆了
    
    __int128 n1 = l1->val;
    __int128 n2 = l2->val;
    
    // 这里在赌位数
    int i = 1;
    __int128 basenum[] = {1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000, 10000000000, 100000000000, 1000000000000, 10000000000000, 100000000000000, 1000000000000000, 10000000000000000, 100000000000000000, 1000000000000000000, 10000000000000000000, 100000000000000000000, 1000000000000000000000, 10000000000000000000000, 100000000000000000000000, 1000000000000000000000000, 10000000000000000000000000, 100000000000000000000000000, 1000000000000000000000000000, 10000000000000000000000000000, 100000000000000000000000000000, 1000000000000000000000000000000, 10000000000000000000000000000000, 100000000000000000000000000000000, 1000000000000000000000000000000000, 10000000000000000000000000000000000, 100000000000000000000000000000000000, 1000000000000000000000000000000000000, 10000000000000000000000000000000000000, 100000000000000000000000000000000000000};

    struct ListNode* p1 = l1->next;
    while (p1) {
        n1 += p1->val * basenum[i++];
        p1 = p1->next;
    }

    i = 1;
    struct ListNode* p2 = l2->next;
    while (p2) {
        n2 += p2->val * basenum[i++];
        p2 = p2->next;
    }

    struct ListNode *l3 = l1;
    struct ListNode *p3 = l3;

    __int128 ret = n1 + n2;

    while (ret > 0) {
        int n = ret % 10;
        ret /= 10;
        // 这里就是在赌不会出现 99 + 1 的情况……
        if (!p3->next) p3->next = l2;
        p3 = p3->next;
        p3->val = n;
    }

    p3->next = NULL;
    return l3->next;
}
